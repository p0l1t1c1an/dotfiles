#! /bin/sh
if git rev-parse --is-inside-work-tree > /dev/null 2>&1 ;
then     
    branch=$(git branch --show-current)
    origin="origin/$branch"

    behind="$(git rev-list $origin --not $branch --count)"
    ahead="$(git rev-list $branch --not $origin --count)"

    unmerged=$(git ls-files -u | wc -l | tr -d ' ')
    stashed=$(git stash list | wc -l | tr -d ' ')

    staged=$(git diff --cached --numstat | wc -l | tr -d ' ')
    unstaged=$(git diff --numstat | wc -l | tr -d ' ')
    untracked=$(git ls-files --others --exclude-standard | wc -l | tr -d ' ')

    prompt="$branch"

    if [ $behind -ne "0" ]; 
    then
        prompt="$prompt ⇣$behind"
    fi

    if [ $ahead -ne "0" ]; 
    then
        prompt="$prompt ⇡$ahead"
    fi

    if [ $unmerged -ne "0" ]; 
    then
        prompt="$prompt ~$unmerged"
    fi

    if [ $stashed -ne "0" ]; 
    then
        prompt="$prompt *$stashed"
    fi

    if [ $staged -ne "0" ]; 
    then
        prompt="$prompt +$staged"
    fi

    if [ $unstaged -ne "0" ]; 
    then
        prompt="$prompt !$unstaged"
    fi

    if [ $untracked -ne "0" ]; 
    then
        prompt="$prompt ?$untracked"
    fi

    echo "$prompt" 
fi

